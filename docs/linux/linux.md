---
sidebar: auto
---

# linux 常用命令

## 1、磁盘管理（文件目录类）

### pwd

目前所在的工作目录的绝对路径名称

```bash
# pwd
/root/test           #输出结果
```

### cd

切换目录

| 参数                      | 功能                     |
| ------------------------- | ------------------------ |
| cd 绝对路径，如`cd /etc`  | 切换到指定目录           |
| cd 相对路径，如`cd ./etc` | 切换到指定目录           |
| cd ~ 或者 cd              | 切换到家目录             |
| cd -                      | 回到上一次所在的目录     |
| cd ..                     | 返回当前目录的上一级目录 |

### ls

目录查看

```bash
ls [-alrtAFR] [name...]
```

参数

- -a：显示所有文件及目录 (ls 内定将文件名或目录名称开头为"."的视为隐藏档，不会列出)
- -l：除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出
- -r：将文件以相反次序显示(原定依英文字母次序)
- -t：将文件依建立时间之先后次序列出
- -A：同 -a ，但不列出 "." (目前目录) 及 ".." (父目录)
- -F：在列出的文件名称后加一符号；例如可执行档则加 "\*", 目录则加 "/"
- -R：若目录下有文件，则以下之文件亦皆依序列出

例：

1. 列出`/lin`下的所有目录

   ```bash
   # 可以在任何目录下执行
   ls -al /lin
   ```

2. 列出`/lin`下所有`test`开头的文件

   ```bash
   ls -al test*
   ```

### mkdir

创建一个空目录

```bash
mkdir [-mp] 目录名称
```

参数：

- -m：配置文件的权限。
- -p：帮助你直接将所需要的目录(包含上一级目录)递归创建起来！

例：

1. 创建一个空的`lin`文件夹

   ```bash
   mkdir lin
   ```

2. 创建多层目录

   ```bash
   mkdir -p lin/lin/lin
   ```

3. 创建 777 权限的文件夹

   ```bash
   mkdir -m 777 lin
   ```

### touch

创建空文件

```bash
touch 文件名
```

例：

1. 创建一个`lin.txt`文件

   ```bash
   touch lin.txt
   ```

### rmdir

删除**空**目录

```bash
rmdir [-p] 目录名称
```

参数：

- p：连同上一级『空的』目录也一起删除

例：

1. 删除空的`lin`目录

   ```bash
   rmdir lin
   ```

2. 删除多层级目录

   ```bash
   rmdir -p lin/lin/lin
   ```

### rm

删除一个文件或者目录

```bash
rm [-ifr] 目录名称
```

参数：

- -i：删除前逐一询问确认。
- -f：即使原档案属性设为唯读，亦直接删除，无需逐一确认。
- -r：将目录及以下之档案亦逐一删除。

例：

1. 删除`lin.sh`文件，并且不需要确认

   ```bash
   rm -f lin.sh
   ```

2. 删除`lin`文件夹及以下的所有文件

   ```bash
   rm -rf lin
   ```

3. 删除当前目录下面的所有文件

   ```bash
   rm -rf *
   ```

### mv

移动文件与目录，或修改名称

```bash
mv [-if] 源文件 目标文件
```

参数：

- -i：若指定目录已有同名文件，则先询问是否覆盖旧文件;
- -f：在 mv 操作要覆盖某已有的目标文件时不给任何指示;

| 命令格式         | 运行结果                                                       |
| :--------------- | :------------------------------------------------------------- |
| mv 文件名 文件名 | 将源文件名改为目标文件名                                       |
| mv 文件名 目录名 | 将文件移动到目标目录                                           |
| mv 目录名 目录名 | 目标目录已存在，将源目录 移动到目标目录；目标 目录不存在则改名 |
| mv 目录名 文件名 | 出错                                                           |

例：

1. 将文件`lin.txt`改为`deep.txt`

   ```bash
   mv lin.txt deep.txt
   ```

2. 将文件夹`lin`移动到`deep`下面

   ```bash
   mv ./lin ./deep
   ```

3. 将文件夹`lin`重命名为`lll`

   ```bash
   mv ./lin ./lll
   ```

### cp

复制文件或目录

```bash
cp [-adfilprsu] 来源档(source) 目标档(destination)
cp [-adfilprsu] source1 source2 source3 .... directory
```

参数：

- -a：相当於 -pdr 的意思，至於 pdr 请参考下列说明；(常用)
- -d：若来源档为连结档的属性(link file)，则复制连结档属性而非文件本身；
- -f：为强制(force)的意思，若目标文件已经存在且无法开启，则移除后再尝试一次；
- -i：若目标档(destination)已经存在时，在覆盖时会先询问动作的进行(常用)
- -l：进行硬式连结(hard link)的连结档创建，而非复制文件本身；
- -p：连同文件的属性一起复制过去，而非使用默认属性(备份常用)；
- -r：递归持续复制，用於目录的复制行为；(常用)
- -s：复制成为符号连结档 (symbolic link)，亦即『捷径』文件；
- -u：若 destination 比 source 旧才升级 destination ！

例：

1. 复制文件`lin.txt`到`deep`文件夹下面

   ```bash
   cp lin.txt ./deep
   ```

### cat

查看文件内容，一般查看一屏能显示完的文件

```bash
cat [-AbeEnstTuv] [--help] [--version] 文件名
```

参数：

- -n：由 1 开始对所有输出的行数编号
- -b：和 -n 相似，只不过对于空白行不编号
- -s：当遇到有连续两行以上的空白行，就代换为一行的空白行

示例：

1. 查看`lin.txt`的内容

   ```bash
   cat lin.txt
   ```

2. 将`lin.txt`的内容输入到`deep.txt`中

   ```bash
   cat lin.txt > deep.txt
   ```

3. 清空`test.sh`里面的内容

   ```bash
   cat /dev/null > test.sh
   ```

### more

显示文件内容，过会以一页一页的形式显示，更方便使用者逐页阅读，而最基本的指令就是按空白键（space）就往下一页显示，按 b 键就会往回（back）一页显示，而且还有搜寻字串的功能（与 vi 相似），使用中的说明文件，请按 h 。

```bash
more 文件名
```

操作：

- Enter 向下 n 行，需要定义。默认为 1 行
- Ctrl+F 向下滚动一屏
- 空格键 向下滚动一屏
- Ctrl+B 返回上一屏
- = 输出当前行的行号
- ：f 输出文件名和当前行的行号
- V 调用 vi 编辑器
- !命令 调用 Shell，并执行命令
- q 退出 more

### less

less 与 more 类似，但使用 less 可以随意浏览文件，而 more 仅能向前移动，却不能向后移动，而且 less 在查看之前不会加载整个文件。

```bash
less [option] 文件名
```

参数：

- -b 设置缓冲区的大小
- -e 当文件显示结束后，自动离开
- -f 强迫打开特殊文件，例如外围设备代号、目录和二进制文件
- -g 只标志最后搜索的关键词
- -i 忽略搜索时的大小写
- -m 显示类似 more 命令的百分比
- -N 显示每行的行号
- -o 将 less 输出的内容在指定文件中保存起来
- -Q 不使用警告音
- -s 显示连续空行为一行
- -S 行过长时间将超出部分舍弃
- -x 将"tab"键显示为规定的数字空格
- /字符串：向下搜索"字符串"的功能
- ?字符串：向上搜索"字符串"的功能
- n：重复前一个搜索（与 / 或 ? 有关）
- N：反向重复前一个搜索（与 / 或 ? 有关）
- b 向后翻一页
- d 向后翻半页
- h 显示帮助界面
- Q 退出 less 命令
- u 向前滚动半页
- y 向前滚动一行
- 空格键 滚动一行
- 回车键 滚动一页
- [pagedown]： 向下翻动一页
- [pageup]： 向上翻动一页

### ln

软链接，在不同目录下面要用到相同的文件，就可以使用软链接，只需要件文件放在一个地方，在任何使用这个文件的地方进行软链接，则都能进行使用，任何一个地方的这个文件被更改，那么其他地方的这个文件也会被更改。因此可以所需文件占用磁盘的空间。

```bash
 ln [参数] [源文件或目录] [目标文件或目录]
```

示例

1. 将`test.txt`软链接到`lin`文件下

   ```bash
   ln test.txt lin/
   ```

2. 将`test.txt`软链接到`lin`文件下并重命名为`lll.txt`

   ```bash
   ln test.txt lin/lll.txt
   ```

3. 删除软链接

   ```bash
   rm -f lll.txt
   ```

### history

查看历史命令

```bash
history
```

删除历史命令

```bash
history -c
```

## 2、用户管理命令

### useradd

添加用户，建立用户账号。

```bash
useradd [-mMnr][-c <备注>][-d <登入目录>][-e <有效期限>][-f <缓冲天数>][-g <群组>][-G <群组>][-s <shell>][-u <uid>][用户帐号]
```

或者

```bash
useradd -D [-b][-e <有效期限>][-f <缓冲天数>][-g <群组>][-G <群组>][-s <shell>]
```

参数：

- -c：加上备注文字。备注文字会保存在 passwd 的备注栏位中。
- -d：指定用户登入时的启始目录。
- -D：变更预设值．
- -e：指定帐号的有效期限。
- -f：指定在密码过期后多少天即关闭该帐号。
- -g：指定用户所属的群组。
- -G：指定用户所属的附加群组。
- -m：自动建立用户的登入目录。
- -M：不要自动建立用户的登入目录。
- -n：取消建立以用户名称为名的群组．
- -r：建立系统帐号。
- -s：指定用户登入后所使用的 shell。
- -u：指定用户 ID。

例：

1. 添加一个`lin`的用户

   ```bash
   useradd lin
   ```

2. 添加一个`lin`的用户，并且指定为`root`的用户组

   ```bash
   useradd -g root lin
   ```

3. 创建一个`lin`的系统用户

   ```bash
   useradd -r lin
   ```

4. 创建一个`lin`的用户并指定`ID`

   ```bash
   useradd lin -u 555
   ```

### passwd

设置用户密码

```bash
passwd [-k] [-l] [-u [-f]] [-d] [-S] [username]
```

参数：

- -d 删除密码
- -f 强制执行
- -k 更新只能发送在过期之后
- -l 停止账号使用
- -S 显示密码信息
- -u 启用已被停止的账户
- -x 设置密码的有效期
- -g 修改群组密码
- -i 过期后停止用户账号

例：

1. 设置`lin`用户的密码，如果没有设置过密码就是新加密码，如果设置过就是修改密码。

   ```bash
   passwd lin
   ```

2. 删除`lin`用户的密码

   ```bash
   passwd -d lin
   ```

3. 显示`lin`用户的密码信息

   ```bash
   passwd -S lin
   ```

### id

显示用户的 ID，以及所属群组的 ID。

```bash
id [-gGnru][--help][--version][用户名称]
```

参数

- -g：显示用户所属群组的 ID。
- -G：显示用户所属附加群组的 ID。
- -n：显示用户，所属群组或附加群组的名称。
- -r：显示实际 ID。
- -u：显示用户 ID。
- -help：显示帮助。
- -version：显示版本信息。

例：

1. 查看`lin`用户是否存在，存在则显示用户信息

   ```bash
   id lin
   ```

2. 显示当前用户信息

   ```bash
   id
   ```

> 查看创建了那些用户：cat /etc/passwd

### su

切换登录的用户

```bash
su [-fmp] [-c command] [-s shell] [--help] [--version] [-] [USER [ARG]]
```

参数：

- -f 或 --fast 不必读启动档（如 csh.cshrc 等），仅用于 csh 或 tcsh
- -m -p 或 --preserve-environment 执行 su 时不改变环境变数
- -c command 或 --command=command 变更为帐号为 USER 的使用者并执行指令（command）后再变回原来使用者
- -s shell 或 --shell=shell 指定要执行的 shell （bash csh tcsh 等），预设值为 /etc/passwd 内的该使用者（USER） shell
- --help 显示说明文件
- --version 显示版本资讯
- \- -l 或 --login 这个参数加了之后，就好像是重新 login 为该使用者一样，大部份环境变数（HOME SHELL USER 等等）都是以该使用者（USER）为主，并且工作目录也会改变，如果没有指定 USER ，内定是 root
- USER 欲变更的使用者帐号
- ARG 传入新的 shell 参数

例：

1. 切换至`lin`用户

   ```bash
   su lin
   ```

2. 切换账号为`lin`，并改变工作目录至`lin`的家目录

   ```bash
   su - lin
   ```

### userdel

删除用户

```bash
userdel [-r][用户帐号]
```

参数：

- -r：删除用户登入目录以及目录中所有文件。

例：

1. 删除`lin`用户

   ```bash
   userdel lin
   ```

2. 删除`lin`用户及该用户的所有文件

   ```bash
   userdel -r lin
   ```

### usermod

修改用户信息

```bash
usermod [-LU][-c <备注>][-d <登入目录>][-e <有效期限>][-f <缓冲天数>][-g <群组>][-G <群组>][-l <帐号名称>][-s <shell>][-u <uid>][用户帐号]
```

参数：

- -c：修改用户帐号的备注文字。
- -d：修改用户登入时的目录。
- -e：修改帐号的有效期限。
- -f：修改在密码过期后多少天即关闭该帐号。
- -g：修改用户所属的群组。
- -G：修改用户所属的附加群组。
- -l：修改用户帐号名称。
- -L：锁定用户密码，使密码无效。
- -s：修改用户登入后所使用的 shell。
- -u：修改用户 ID。
- -U：解除密码锁定。

例：

1. 修改`lin`用户的 uid

   ```bash
   usermod -u 777 lin
   ```

2. 修改`lin`用户名称为`deep`

   ```bash
   user -l lin deep
   ```

### sudo

此命令可以让非 root 的用户运行只有 root 才有权限执行的命令。

参考：[Linux 基本功系列之 sudo 命令](https://blog.csdn.net/m0_60259116/article/details/135170503?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_utm_term~default-0-135170503-blog-138045148.235^v43^control&spm=1001.2101.3001.4242.1&utm_relevant_index=3)

### groupadd

新增组

```bash
groupadd [option] 组名
```

参数：

- -f：如果组已经存在则成功退出，并且如果 GID 已经存在则取消 -g
- -g：为新组使用 GID
- -h：显示此帮助信息并推出
- -k：不使用 /etc/login.defs 中的默认值
- -o：允许创建有重复 GID 的组
- -p：为新组使用此加密过的密码
- -r：创建一个系统账户
- -R：chroot 到的目录

例：

1. 创建一个`lin`组

   ```bash
   groupadd lin
   ```

2. 指定`lin`租的 id

   ```bash
   groupadd -g 500 lin
   ```

### groupdel

删除组名

```bash
groupdel [option] [群组名称]
```

### groupmod

修改组名

```bash
groupmod [option] 新组名 老组名
```

参数：

- -g：设置欲使用的群组识别码。
- -o：重复使用群组识别码。
- -n：设置欲使用的群组名称。

## 3、文件权限类

### 文件属性

![image](/linux/linux-file.png)

**对每个位置的说明：**

- 第一个字符说明：
  - 当为[ *d* ]则是目录
  - 当为[ *-* ]则是文件；
  - 若是[ *l* ]则表示为链接文档(link file)；
  - 若是[ *b* ]则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；
  - 若是[ *c* ]则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。
- 第 1-3 位确定属主（该文件的所有者）拥有该文件的权限。—User
- 第 4-6 位确定属组（所有者的同组用户）拥有该文件的权限，—Group
- 第 7-9 位确定其他用户拥有该文件的权限 —Other

**rwx 作用文件和目录的不同解释**

> r=4，w=2，x=1

**作用到文件：**

[ r ]代表可读(read): 可以读取，查看

[ w ]代表可写(write): 可以修改，但是不代表可以删除该文件，删除一个文件的前

[ x ]代表可执行(execute):可以被系统执行

**作用到目录：**

[ r ]代表可读(read): 可以读取，ls 查看目录内容

[ w ]代表可写(write): 可以修改，目录内创建+删除+重命名目录

[ x ]代表可执行(execute):可以进入该目录

### chmod

改变权限

```bash
chmod [-cfvR] [--help] [--version] mode file...
```

mode：

```bash
[ugoa...][[+-=][rwxX]...][,...]

# u:所有者（user）
# g:所有组(group)
# o:其他人(other)
# a:所有人(u、g、o 的总和)

# +号代表增加
# -号代表取消
# =号代表直接赋予
```

参数：

- -c：若该文件权限确实已经更改，才显示其更改动作
- -f：若该文件权限无法被更改也不要显示错误讯息
- -v：显示权限变更的详细资料
- -R：对目前目录下的所有文件与子目录进行相同的权限变更(即以递回的方式逐个变更)
- --help：显示辅助说明
- --version：显示版本

例：

1. 修改文件使其所属*主*用户具有执行权限

   ```bash
   chmod u+x lin.txt
   ```

2. 修改文件使其所属*组*用户具有执行权限

   ```bash
   chmod g+x in.txt
   ```

3. 将`lin.txt`设置为所有人可读

   ```bash
   chmod ugo+r lin.txt

   # 或
   chmod a+r lin.txt
   ```

4. 将当前目录下所有文件与子目录设置为所有人可读

   ```bash
   chmod -R a+r *
   ```

5. 也可以通过数字的方式设置

   ```bash
   chmod ug=rwx,o=x file

   # 等同于
   chmod 771 file
   ```

### chown

改变所有者

```bash
chmod [-cfhvR] [--help] [--version] user[:group] file...
```

参数：

- user : 新的文件拥有者的使用者 ID
- group : 新的文件拥有者的使用者群体(group)
- -c : 若该文件拥有者确实已经更改，才显示其更改动作
- -f : 若该文件拥有者无法被更改也不要显示错误讯息
- -h : 只对于连结(link)进行变更，而非该 link 真正指向的文件
- -v : 显示拥有者变更的详细资料
- -R : 对目前目录下的所有文件与子目录进行相同的拥有者变更(即以递回的方式逐个变更)
- --help : 显示辅助说明
- --version : 显示版本

例：

1. 修改`lin.txt`文件的所有者为`lin`用户

   ```bash
   chown lin lin.txt
   ```

2. 将当前目录下面的所有文件的拥有者改为`lin`用户

   ```bash
   chmod -R lin *
   ```

### chgrp

改变所属组

```bash
chgrp [-cfhRv][--help][--version][所属群组][文件或目录...] 或 chgrp [-cfhRv][--help][--reference=<参考文件或目录>][--version][文件或目录...]
```

参数：

- -c：效果类似"-v"参数，但仅回报更改的部分。
- -f：不显示错误信息。
- -h：只对符号连接的文件作修改，而不更动其他任何相关文件。
- -R：递归处理，将指定目录下的所有文件及子目录一并处理。
- -v：显示指令执行过程。
- --help：在线帮助。
- --reference：把指定文件或目录的所属群组全部设成和参考文件或目录的所属群组相同。
- --version：显示版本信息。

例：

1. 修改文件的所属组

   ```bash
   chgrp root lin.txt
   ```

## 4、搜索查找类

### find

查找文件

```bash
find   path   -option   [   -print ]   [ -exec   -ok   command ]   {} ;
```

参数

- -name name, -iname name : 文件名称符合 name 的文件。iname 会忽略大小写
- -size n : 文件大小 是 n 单位，b 代表 512 位元组的区块，c 表示字元数，k 表示 kilo bytes，w 是二个位元组。-type c : 文件类型是 c 的文件。

例：

1. 查找当前目录下所有`te`开头的文件

   ```bash
   find -name 'te*'
   ```

2. 查找`lin`目录下所有`l`开头的文件

   ```bash
   find /lin -name 'l*'
   ```

3. 按拥有者：查找`/opt`目录下，用户名称为`lin`的文件

   ```bash
   find opt/ -user lin
   ```

4. 在`/home`目录下查找大于 200m 的文件（+n 大于 -n 小于 n 等于）

   ```bash
   find /home -size +204800
   ```

### grep

查找文件中是否包含指定字符

```bash
grep [option] '查找的字符串' 文件或目录
```

例：

1. 查询`test.txt`文件中是否包含字符`toatl`，并输出行号

   ```bash
   grep -n 'total' test.txt
   ```

2. 递归查询`/lin`文件夹在所有包含`toatl`的文件，并输出行号

   ```bash
   grep -nr 'total' /lin
   ```

## 5、压缩和压缩类

### gzip

用于压缩和解压缩文件，文件经它压缩过后，其名称后面会多出".gz"的扩展名。

```bash
gzip [-acdfhlLnNqrtvV][-S &lt;压缩字尾字符串&gt;][-&lt;压缩效率&gt;][--best/fast][文件...]

#或
gzip [-acdfhlLnNqrtvV][-S &lt;压缩字尾字符串&gt;][-&lt;压缩效率&gt;][--best/fast][目录]
```

参数：

- -a：使用 ASCII 文字模式。
- -c：把压缩后的文件输出到标准输出设备，不去更动原始文件。
- -d：解开压缩文件。
- -f：强行压缩文件。不理会文件名称或硬连接是否存在以及该文件是否为符号连接。
- -h：在线帮助。
- -l：列出压缩文件的相关信息。
- -L：显示版本与版权信息。
- -n：压缩文件时，不保存原来的文件名称及时间戳记。
- -N：压缩文件时，保存原来的文件名称及时间戳记。
- -q：不显示警告信息。
- -r：递归处理，将指定目录下的所有文件及子目录一并处理。
- -S：更改压缩字尾字符串。
- -t：测试压缩文件是否正确无误。
- -v：显示指令执行过程。
- -V：显示版本信息。
- -<压缩效率> ：压缩效率是一个介于 1－9 的数值，预设值为"6"，指定愈大的数值，压缩效率就会愈高。
- --best：此参数的效果和指定"-9"参数相同。
- --fast：此参数的效果和指定"-1"参数相同。

注意：

- 只能压缩文件不能压缩目录
- 不保留原来的文件
- 同时多个文件会产生多个压缩包

例：

1. 将`test.sh`压缩

   ```bash
   gzip test.sh
   ```

2. 将`test.sh.gz`解压缩

   ```bash
   gzip -d test.sh.gz
   ```

### gunzip

解压缩文件

```bash
gunzip 压缩包
```

### zip

zip 压缩命令在 windows/linux 都通用，可以压缩目录且保留源文件。

```bash
zip [option] 目标文件名 源文件
```

参数：

- -A 调整可执行的自动解压缩文件。
- -b<工作目录> 指定暂时存放文件的目录。
- -c 替每个被压缩的文件加上注释。
- -d 从压缩文件内删除指定的文件。
- -D 压缩文件内不建立目录名称。
- -f 此参数的效果和指定"-u"参数类似，但不仅更新既有文件，如果某些文件原本不存在于压缩文件内，使用本参数会一并将其加入压缩文件中。
- -F 尝试修复已损坏的压缩文件。
- -g 将文件压缩后附加在既有的压缩文件之后，而非另行建立新的压缩文件。
- -h 在线帮助。
- -i<范本样式> 只压缩符合条件的文件。
- -j 只保存文件名称及其内容，而不存放任何目录名称。
- -J 删除压缩文件前面不必要的数据。
- -k 使用 MS-DOS 兼容格式的文件名称。
- -l 压缩文件时，把 LF 字符置换成 LF+CR 字符。
- -ll 压缩文件时，把 LF+CR 字符置换成 LF 字符。
- -L 显示版权信息。
- -m 将文件压缩并加入压缩文件后，删除原始文件，即把文件移到压缩文件中。
- -n<字尾字符串> 不压缩具有特定字尾字符串的文件。
- -o 以压缩文件内拥有最新更改时间的文件为准，将压缩文件的更改时间设成和该文件相同。
- -q 不显示指令执行过程。
- -r 递归处理，将指定目录下的所有文件和子目录一并处理。
- -S 包含系统和隐藏文件。
- -t<日期时间> 把压缩文件的日期设成指定的日期。
- -T 检查备份文件内的每个文件是否正确无误。
- -u 更换较新的文件到压缩文件内。
- -v 显示指令执行过程或显示版本信息。
- -V 保存 VMS 操作系统的文件属性。
- -w 在文件名称里假如版本编号，本参数仅在 VMS 操作系统下有效。
- -x<范本样式> 压缩时排除符合条件的文件。
- -X 不保存额外的文件属性。
- -y 直接保存符号连接，而非该连接所指向的文件，本参数仅在 UNIX 之类的系统下有效。
- -z 替压缩文件加上注释。
- -$ 保存第一个被压缩文件所在磁盘的卷册名称。
- -<压缩效率> 压缩效率是一个介于 1-9 的数值。

例：

1. 将`test.sh`压缩为`test.zip`

   ```bash
   zip test.zip test.sh
   ```

2. 将`lin`文件夹压缩为`lin.zip`

   ```bash
   zip lin.zip lin
   ```

### unzip

unzip 命令用于解压缩 zip 文件

```bash
unzip [-cflptuvz][-agCjLMnoqsVX][-P <密码>][.zip文件][文件][-d <目录>][-x <文件>]

#或
unzip [-Z]
```

参数：

- -c 将解压缩的结果显示到屏幕上，并对字符做适当的转换。
- -f 更新现有的文件。
- -l 显示压缩文件内所包含的文件。
- -p 与-c 参数类似，会将解压缩的结果显示到屏幕上，但不会执行任何的转换。
- -t 检查压缩文件是否正确。
- -u 与-f 参数类似，但是除了更新现有的文件外，也会将压缩文件中的其他文件解压缩到目录中。
- -v 执行是时显示详细的信息。
- -z 仅显示压缩文件的备注文字。
- -a 对文本文件进行必要的字符转换。
- -b 不要对文本文件进行字符转换。
- -C 压缩文件中的文件名称区分大小写。
- -j 不处理压缩文件中原有的目录路径。
- -L 将压缩文件中的全部文件名改为小写。
- -M 将输出结果送到 more 程序处理。
- -n 解压缩时不要覆盖原有的文件。
- -o 不必先询问用户，unzip 执行后覆盖原有文件。
- -P<密码> 使用 zip 的密码选项。
- -q 执行时不显示任何信息。
- -s 将文件名中的空白字符转换为底线字符。
- -V 保留 VMS 的文件版本信息。
- -X 解压缩时同时回存文件原来的 UID/GID。
- [.zip 文件] 指定.zip 压缩文件。
- [文件] 指定要处理.zip 压缩文件中的哪些文件。
- -d<目录> 指定文件解压缩后所要存储的目录。
- -x<文件> 指定不要处理.zip 压缩文件中的哪些文件。
- -Z unzip -Z 等于执行 zipinfo 指令。、

例：

1. 解压`lin.zip`到当前文件夹

   ```bash
   unzip lin.zip
   ```

2. 解压`lin.zip`到`home`文件夹

   ```bash
   unzip lin.zip -d /home
   ```

### tar

压缩文件，tar [选项] XXX.tar.gz 将要打包进去的内容 （功能描述：打包目录，压缩后的文件格式.tar.gz）

```bash
tar [option] 打包的文件名.tar.gz [源文件]

# 多个文件同时打包
tar -zcvf lll.tar.gz lin.txt lll.txt

# 打包文件夹
tar -zcvf lin.tar.gz lll/

# 解压到当前目录
tar -zxvf lin.tar.gz

# -C 解压到某个目录下
tar -zxvf lll.tar.gz -C /lin
```

参数：

- -c：产生.tar 打包文件
- -v：显示详细信息
- -f：指定压缩后的文件名
- -z：打包同时压缩
- -x：解压.tar 文件
- -C：解压到指定目录

## 6、磁盘查看和分区类

### du

查看文件和目录占用的磁盘空间

```bash
du [option] [文件名或者文件夹]
```

参数：

- -a：不仅查看目录大小，还包括文件
- -c：显示所有的文件和子目录大小后，显示总和
- -h：以容易阅读的方式显示文件的大小（G，M，KB）
- -s：只显示总和
- --max-depth=n：指定统计子目录的深度为第 n 层

例：

1. 以方便阅读的方式查看当前文件夹中目录及文件的大小

   ```bash
   du -ah
   ```

2. 以方便阅读的方式查看`/lin`文件夹中目录及文件的大小

   ```bash
   du -ah /lin
   ```

3. 显示当前目录的总占用

   ```bash
   du -s
   ```

### df

用于显示目前在 Linux 系统上的文件系统的磁盘使用情况统计

```bash
df [option] [file]
```

参数：

- -h：以容易阅读的方式显示文件的大小（G，M，KB）

例：

1. 产生可读的格式 df 命令的输出

   ```bash
   df -h
   ```

### lsblk

查看设备的挂载情况

```bash
lsblk -f
```

参数：

- -f：查看详细的设备挂载情况，显示文件系统信息

例：

1. 查看详细的设备挂载情况，显示文件系统信息

   ```bash
   lsblk -f
   ```

### mount

用于挂载 Linux 系统外的文件

```bash
mount [-hV]
mount -a [-fFnrsvw] [-t vfstype]
mount [-fnrsvw] [-o options [,...]] device | dir
mount [-fnrsvw] [-t vfstype] [-o options] device dir
```

参数：

- -V：显示程序版本
- -h：显示辅助讯息
- -v：显示较讯息，通常和 -f 用来除错。
- -a：将 /etc/fstab 中定义的所有档案系统挂上。
- -F：这个命令通常和 -a 一起使用，它会为每一个 mount 的动作产生一个行程负责执行。在系统需要挂上大量 NFS 档案系统时可以加快挂上的动作。
- -f：通常用在除错的用途。它会使 mount 并不执行实际挂上的动作，而是模拟整个挂上的过程。通常会和 -v 一起使用。
- -n：一般而言，mount 在挂上后会在 /etc/mtab 中写入一笔资料。但在系统中没有可写入档案系统存在的情况下可以用这个选项取消这个动作。
- -s-r：等于 -o ro
- -w：等于 -o rw
- -L：将含有特定标签的硬盘分割挂上。
- -U：将档案分割序号为 的档案系统挂下。-L 和 -U 必须在/proc/partition 这种档案存在时才有意义。
- -t：指定档案系统的型态，通常不必指定。mount 会自动选择正确的型态。
- -o async：打开非同步模式，所有的档案读写动作都会用非同步模式执行。
- -o sync：在同步模式下执行。
- -o atime、-o noatime：当 atime 打开时，系统会在每次读取档案时更新档案的『上一次调用时间』。当我们使用 flash 档案系统时可能会选项把这个选项关闭以减少写入的次数。
- -o auto、-o noauto：打开/关闭自动挂上模式。
- -o defaults:使用预设的选项 rw, suid, dev, exec, auto, nouser, and async.
- -o dev、-o nodev-o exec、-o noexec 允许执行档被执行。
- -o suid、-o nosuid：
- 允许执行档在 root 权限下执行。
- -o user、-o nouser：使用者可以执行 mount/umount 的动作。
- -o remount：将一个已经挂下的档案系统重新用不同的方式挂上。例如原先是唯读的系统，现在用可读写的模式重新挂上。
- -o ro：用唯读模式挂上。
- -o rw：用可读写模式挂上。
- -o loop=：使用 loop 模式用来将一个档案当成硬盘分割挂上系统。

### umount

用于卸除文件系统

```bash
umount [-ahnrvV][-t <文件系统类型>][文件系统]
```

参数：

- -a 卸除/etc/mtab 中记录的所有文件系统。
- -h 显示帮助。
- -n 卸除时不要将信息存入/etc/mtab 文件中。
- -r 若无法成功卸除，则尝试以只读的方式重新挂入文件系统。
- -t<文件系统类型> 仅卸除选项中所指定的文件系统。
- -v 执行时显示详细的信息。
- -V 显示版本信息。
- [文件系统] 除了直接指定文件系统外，也可以用设备名称或挂入点来表示文件系统。

## 7、进程管理类

### ps

显示当前进程 (process) 的状态

```bash
ps [options] [--help]
```

参数：

- -A：列出所有的行程
- -w：显示加宽可以显示较多的资讯
- -au：显示较详细的资讯
- -aux：显示所有包含其他使用者的行程
- au(x)：输出格式 :
- USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND
- USER:：行程拥有者
- PID：pid
- %CPU：占用的 CPU 使用率
- %MEM：占用的记忆体使用率
- VSZ：占用的虚拟记忆体大小
- RSS：占用的记忆体大小
- TTY：终端的次要装置号码 (minor device number of tty)
- STAT：该行程的状态:
- D：不可中断的静止 (通悸 □□ 缜 b 进行 I/O 动作)
- R：正在执行中
- S：静止状态
- T：暂停执行
- Z：不存在但暂时无法消除
- W：没有足够的记忆体分页可分配
- <：高优先序的行程
- N：低优先序的行程
- L：有记忆体分页分配并锁在记忆体内 (实时系统或捱 A I/O)
- START：行程开始时间
- TIME：执行的时间
- COMMAND：所执行的指令

例：

1. 显示进程信息

   ```bash
   ps -A
   ```

2. 显示指定用户的进程信息

   ```bash
   ps -u root
   ```

3. 显示所有进程信息，连同命令行

   ```bash
   ps -ef
   ```

4. 配合`grep`查询`java`进程，查出`PID`后，就可以杀掉进程了

   ```bash
   ps -ef | grep java
   ps aux | grep java
   ```

### kill

杀死指定进程

```bash
kill [-s <信息名称或编号>][程序]

# 或者
kill [-l <信息编号>]
```

参数：

- -l <信息编号> 　若不加<信息编号>选项，则-l 参数会列出全部的信息名称。
- -s <信息名称或编号> 　指定要送出的信息。
- [程序] 　[程序]可以是程序的`PID`或是`PGID`，也可以是工作编号。

例：

1. 杀死`pid`为 1097 的进程

   ```bash
   # 彻底杀死进程
   kill -9 1097
   ```

2. 杀死指定用户的所有进程

   ```bash
   #kill -9 $(ps -ef | grep hnlinux) //方法一 过滤出hnlinux用户进程
   #kill -u hnlinux //方法二
   ```

3. 强制杀死进程

   ```bash
   kill -KILL 123456
   ```

### pstree

查看进程树

```bash
pstree [option]
```

参数：

- -p：查看进程的 pid
- -u：查看进行的所属用户

### top

实时显示进程动态

```bash
top [-] [d delay] [q] [c] [S] [s] [i] [n] [b]
```

参数：

- d：改变显示的更新速度，或是在交谈式指令列( interactive command)按 s
- q：没有任何延迟的显示速度，如果使用者是有 superuser 的权限，则 top 将会以最高的优先序执行
- c：切换显示模式，共有两种模式，一是只显示执行档的名称，另一种是显示完整的路径与名称 S : 累积模式，会将己完成或消失的子行程 ( dead child process ) 的 CPU time 累积起来
- s：安全模式，将交谈式指令取消, 避免潜在的危机
- i：不显示任何闲置 (idle) 或无用 (zombie) 的行程
- n：更新的次数，完成后将会退出 top
- b：批次档模式，搭配 "n" 参数一起使用，可以用来将 top 的结果输出到档案内

### netstat

显示网络状态，使用 netstat 通常用来查看端口是否被占用

```bash
netstat [-acCeFghilMnNoprstuvVwx][-A<网络类型>][--ip]
```

参数：

- -a 或--all 显示所有连线中的 Socket。
- -A<网络类型>或--<网络类型> 列出该网络类型连线中的相关地址。
- -c 或--continuous 持续列出网络状态。
- -C 或--cache 显示路由器配置的快取信息。
- -e 或--extend 显示网络其他相关信息。
- -F 或--fib 显示 FIB。
- -g 或--groups 显示多重广播功能群组组员名单。
- -h 或--help 在线帮助。
- -i 或--interfaces 显示网络界面信息表单。
- -l 或--listening 显示监控中的服务器的 Socket。
- -M 或--masquerade 显示伪装的网络连线。
- -n 或--numeric 直接使用 IP 地址，而不通过域名服务器。
- -N 或--netlink 或--symbolic 显示网络硬件外围设备的符号连接名称。
- -o 或--timers 显示计时器。
- -p 或--programs 显示正在使用 Socket 的程序识别码和程序名称。
- -r 或--route 显示 Routing Table。
- -s 或--statistice 显示网络工作信息统计表。
- -t 或--tcp 显示 TCP 传输协议的连线状况。
- -u 或--udp 显示 UDP 传输协议的连线状况。
- -v 或--verbose 显示指令执行过程。
- -V 或--version 显示版本信息。
- -w 或--raw 显示 RAW 传输协议的连线状况。
- -x 或--unix 此参数的效果和指定"-A unix"参数相同。
- --ip 或--inet 此参数的效果和指定"-A inet"参数相同。

例：

1. 显示网络状态

   ```bash
   netstat -a
   ```

2. 使用 netstat 通常用来查看端口是否被占用

   ```bash
   netstat -anp | grep  进程号或端口号
   netstat –nlp | grep 端口号
   ```

### crontab

用来定期执行程序的命令。当安装完成操作系统之后，默认便会启动此任务调度命令。crond 命令每分锺会定期检查是否有要执行的工作，如果有要执行的工作便会自动执行该工作。

```bash
crontab [ -u user ] file

# 或
crontab [ -u user ] { -l | -r | -e }
```

参数：

- -e : 执行文字编辑器来设定时程表，内定的文字编辑器是 VI，如果你想用别的文字编辑器，则请先设定 VISUAL 环境变数来指定使用那个文字编辑器(比如说 setenv VISUAL joe)
- -r : 删除目前的时程表
- -l : 列出目前的时程表

说明：

```bash
*			*			*		*			*           command
minute		hour		day		month		week		command
分			时			天		月		  星期		命令
```

hour：表示小时，可以是从 0 到 23 之间的任何整数。

day：表示日期，可以是从 1 到 31 之间的任何整数。

month：表示月份，可以是从 1 到 12 之间的任何整数。

week：表示星期几，可以是从 0 到 7 之间的任何整数，这里的 0 或 7 代表星期日。

command：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。

> 星号（\*）：代表所有可能的值，例如 month 字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。
> 逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”
> 中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”
> 正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用
>
> ```
> 0 */2 * * * /sbin/service httpd restart  #意思是每两个小时重启一次apache
>
> 50 7 * * * /sbin/service sshd start  #意思是每天7：50开启ssh服务
>
> 50 22 * * * /sbin/service sshd stop  #意思是每天22：50关闭ssh服务
>
> 0 0 1,15 * * fsck /home  #每月1号和15号检查/home 磁盘
>
> 1 * * * * /home/bruce/backup  #每小时的第一分执行 /home/bruce/backup这个文件
>
> 00 03 * * 1-5 find /home "*.xxx" -mtime +4 -exec rm {} \;  #每周一至周五3点钟，在目录/home中，查找文件名为*.xxx的文件，并删除4天前的文件。
>
> 30 6 */10 * * ls  #意思是每月的1、11、21、31日是的6：30执行一次ls命令
> ```

例：

1. 设置一个定时任务

   ```bash
   # 1.打开定时任务的 vi 编辑器
   crontab -e

   # 2.书写定时任务，每分钟执行一次 /lin/test.sh 脚本
   * * * * * /lin/test.sh
   ```

2. 查看定时任务

   ```bash
   crontab -l
   ```

3. 删除定时任务

   ```bash
   crontab -r
   ```
