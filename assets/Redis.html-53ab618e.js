import{_ as p,r as o,o as c,c as l,b as s,d as a,a as e,e as i}from"./app-63ba67c3.js";const u="/lin-note/Redis/keys.png",d={},r={href:"https://redis.io/",target:"_blank",rel:"noopener noreferrer"},k={href:"https://www.redis.net.cn/",target:"_blank",rel:"noopener noreferrer"};function m(v,n){const t=o("ExternalLinkIcon");return c(),l("div",null,[n[2]||(n[2]=s("h1",{id:"redis",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#redis","aria-hidden":"true"},"#"),a(" Redis")],-1)),s("p",null,[s("a",r,[n[0]||(n[0]=a("官网",-1)),e(t)])]),s("p",null,[s("a",k,[n[1]||(n[1]=a("中文翻译版",-1)),e(t)])]),n[3]||(n[3]=i(`<h2 id="_1、安装" tabindex="-1"><a class="header-anchor" href="#_1、安装" aria-hidden="true">#</a> 1、安装</h2><p>使用 docker 进行安装</p><ol><li><p>拉取镜像</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull redis:8.0.2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>更改<code>/data/redis/conf/redis.conf</code>文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 允许所有IP访问（生产环境可改为内网IP，如 192.168.1.0/24）</span>
<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
<span class="token comment"># 关闭保护模式（否则仅本地能访问）</span>
protected-mode no
<span class="token comment"># 端口（默认6379，可自定义）</span>
port <span class="token number">6379</span>
<span class="token comment"># 设置Redis密码（必填，避免未授权访问）</span>
requirepass <span class="token number">123456</span>
<span class="token comment"># 持久化：开启AOF（追加日志，比RDB更安全）</span>
appendonly <span class="token function">yes</span>
<span class="token comment"># 每秒刷盘一次（平衡性能和数据安全）</span>
appendfsync everysec
<span class="token comment"># 持久化：RDB快照（兜底，每5分钟/至少1个修改触发快照）</span>
save <span class="token number">300</span> <span class="token number">1</span>
<span class="token comment"># 数据存储目录（容器内路径，需和挂载目录对应）</span>
<span class="token function">dir</span> /data
<span class="token comment"># 日志文件路径</span>
logfile /logs/redis.log
<span class="token comment"># 内存限制（按需设置，如 1GB，避免占满服务器内存）</span>
maxmemory 1gb
<span class="token comment"># 内存淘汰策略（内存满时删除最少使用的Key）</span>
maxmemory-policy allkeys-lru
<span class="token comment"># 容器内无需后台运行（由Docker -d参数接管）</span>
daemonize no
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>启动容器</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\\</span>
  <span class="token parameter variable">--name</span> redis <span class="token punctuation">\\</span>                  <span class="token comment"># 容器名称（自定义，如 redis-7.2）</span>
  <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>              <span class="token comment"># 开机自启 + 容器异常时自动重启</span>
  <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 <span class="token punctuation">\\</span>                  <span class="token comment"># 端口映射：宿主机6379 → 容器6379</span>
  <span class="token parameter variable">-v</span> /data/redis/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\\</span>  <span class="token comment"># 挂载自定义配置</span>
  <span class="token parameter variable">-v</span> /data/redis/data:/data <span class="token punctuation">\\</span>     <span class="token comment"># 挂载数据目录（持久化核心）</span>
  <span class="token parameter variable">-v</span> /data/redis/logs:/logs <span class="token punctuation">\\</span>     <span class="token comment"># 挂载日志目录</span>
  <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token punctuation">\\</span>             <span class="token comment"># 赋予容器特权（解决目录权限问题）</span>
  redis:8.0.2 <span class="token punctuation">\\</span>                     <span class="token comment"># 使用的镜像版本</span>
  redis-server /etc/redis/redis.conf  <span class="token comment"># 指定配置文件启动（覆盖默认配置）</span>

<span class="token comment"># 纯享版</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\\</span>
  <span class="token parameter variable">--name</span> redis <span class="token punctuation">\\</span>
  <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span>
  <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 <span class="token punctuation">\\</span>
  <span class="token parameter variable">-v</span> /data/redis/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\\</span>
  <span class="token parameter variable">-v</span> /data/redis/data:/data <span class="token punctuation">\\</span>
  <span class="token parameter variable">-v</span> /data/redis/logs:/logs <span class="token punctuation">\\</span>
  <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token punctuation">\\</span>
  redis:8.0.2 <span class="token punctuation">\\</span>
  redis-server /etc/redis/redis.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>查看是否启动成功</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>查看是否安装成功</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> redis redis-cli

<span class="token comment"># 登录redis</span>
AUTH <span class="token number">123456</span>

<span class="token comment"># 验证是否连接成功</span>
<span class="token function">ping</span>
<span class="token comment"># 如果控制台返回 pong 则代表成功</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_2、数据类型" tabindex="-1"><a class="header-anchor" href="#_2、数据类型" aria-hidden="true">#</a> 2、数据类型</h2><table><thead><tr><th>数据类型</th><th>示例结构</th></tr></thead><tbody><tr><td><strong>String</strong></td><td><code>hello world</code></td></tr><tr><td><strong>Hash</strong></td><td><code>{name: &quot;Jack&quot;, age: 21}</code></td></tr><tr><td><strong>List</strong></td><td><code>[A -&gt; B -&gt; C -&gt; C]</code></td></tr><tr><td><strong>Set</strong></td><td><code>{A, B, C}</code></td></tr><tr><td><strong>SortedSet (Zset)</strong></td><td><code>{A: 1, B: 2, C: 3}</code></td></tr><tr><td><strong>GEO</strong></td><td><code>{A: (120.3, 30.5)}</code></td></tr><tr><td><strong>BitMap</strong></td><td><code>0110110101110101011</code></td></tr><tr><td><strong>HyperLog</strong></td><td><code>0110110101110101011</code></td></tr></tbody></table><h2 id="_3、通用命令" tabindex="-1"><a class="header-anchor" href="#_3、通用命令" aria-hidden="true">#</a> 3、通用命令</h2><table><thead><tr><th>命令</th><th>说明</th><th>语法示例</th></tr></thead><tbody><tr><td><strong>KEYS</strong></td><td>查看符合模板的所有 key，不建议在生产环境设备上使用（会阻塞服务器）</td><td><code>KEYS *</code>（匹配所有 key）<br><code>KEYS user:*</code>（匹配所有以 <code>user:</code> 开头的 key）</td></tr><tr><td><strong>DEL</strong></td><td>删除一个或多个指定的 key</td><td><code>DEL mykey</code><br><code>DEL key1 key2 key3</code>（批量删除）</td></tr><tr><td><strong>EXISTS</strong></td><td>判断 key 是否存在，返回 1 表示存在，0 表示不存在</td><td><code>EXISTS mykey</code></td></tr><tr><td><strong>EXPIRE</strong></td><td>给一个 key 设置有效期（单位：秒），到期后自动删除</td><td><code>EXPIRE mykey 60</code>（设置 <code>mykey</code> 60 秒后过期）</td></tr><tr><td><strong>TTL</strong></td><td>查看 key 的剩余有效期（单位：秒），-1 表示永不过期，-2 表示已过期</td><td><code>TTL mykey</code></td></tr></tbody></table><h2 id="_4、字符串命令" tabindex="-1"><a class="header-anchor" href="#_4、字符串命令" aria-hidden="true">#</a> 4、字符串命令</h2><table><thead><tr><th>命令</th><th>说明</th><th>语法示例</th></tr></thead><tbody><tr><td><strong>SET</strong></td><td>添加或者修改已存在的一个 String 类型的键值对</td><td><code>SET username &quot;zhangsan&quot;</code></td></tr><tr><td><strong>GET</strong></td><td>根据 key 获取 String 类型的 value</td><td><code>GET username</code></td></tr><tr><td><strong>MSET</strong></td><td>批量添加多个 String 类型的键值对</td><td><code>MSET key1 &quot;value1&quot; key2 &quot;value2&quot; key3 &quot;value3&quot;</code></td></tr><tr><td><strong>MGET</strong></td><td>根据多个 key 获取多个 String 类型的 value</td><td><code>MGET key1 key2 key3</code></td></tr><tr><td><strong>INCR</strong></td><td>让一个整型的 key 自增 1</td><td><code>INCR num</code></td></tr><tr><td><strong>INCRBY</strong></td><td>让一个整型的 key 自增并指定步长</td><td><code>INCRBY num 2</code>（让 <code>num</code> 值自增 2）</td></tr><tr><td><strong>INCRBYFLOAT</strong></td><td>让一个浮点类型的数字自增并指定步长</td><td><code>INCRBYFLOAT score 1.5</code></td></tr><tr><td><strong>SETNX</strong></td><td>添加一个 String 类型的键值对，前提是这个 key 不存在，否则不执行</td><td><code>SETNX lock &quot;1&quot;</code>（常用于分布式锁场景）</td></tr><tr><td><strong>SETEX</strong></td><td>添加一个 String 类型的键值对，并且指定有效期</td><td><code>SETEX session 3600 &quot;session_id_123&quot;</code>（设置 <code>session</code> 1 小时后过期）</td></tr></tbody></table><h3 id="key-的分级存储" tabindex="-1"><a class="header-anchor" href="#key-的分级存储" aria-hidden="true">#</a> key 的分级存储</h3><p>推荐存储格式</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ldlang:order:1 张三
ldlang:order:2 李四
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这样就会得到分组的 key</p><p><img src="`+u+`" alt="分组存储"></p><h2 id="_5、hash-类型命令" tabindex="-1"><a class="header-anchor" href="#_5、hash-类型命令" aria-hidden="true">#</a> 5、hash 类型命令</h2><p>在字符串类型命令前面加个<code>H</code>就是<code>hash</code>的命令，但是指定 key 的同时还是指定<code>字段名</code>和<code>值</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>HSET user:1 name <span class="token string">&quot;zhangsan&quot;</span>

user:1 <span class="token comment"># key</span>
name <span class="token comment"># 字段</span>
<span class="token string">&quot;zhangsan&quot;</span> <span class="token comment">#值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>命令</th><th>说明</th><th>语法示例</th></tr></thead><tbody><tr><td><strong>HSET</strong></td><td>添加或者修改 hash 类型 key 的 field 的值</td><td><code>HSET user:1 name &quot;zhangsan&quot;</code></td></tr><tr><td><strong>HGET</strong></td><td>获取一个 hash 类型 key 的 field 的值</td><td><code>HGET user:1 name</code></td></tr><tr><td><strong>HMSET</strong></td><td>批量添加多个 hash 类型 key 的 field 的值</td><td><code>HMSET user:1 age 25 city &quot;beijing&quot;</code></td></tr><tr><td><strong>HMGET</strong></td><td>批量获取多个 hash 类型 key 的 field 的值</td><td><code>HMGET user:1 name age city</code></td></tr><tr><td><strong>HGETALL</strong></td><td>获取一个 hash 类型的 key 中的所有的 field 和 value</td><td><code>HGETALL user:1</code></td></tr><tr><td><strong>HKEYS</strong></td><td>获取一个 hash 类型的 key 中的所有的 field</td><td><code>HKEYS user:1</code></td></tr><tr><td><strong>HVALS</strong></td><td>获取一个 hash 类型的 key 中的所有的 value</td><td><code>HVALS user:1</code></td></tr><tr><td><strong>HINCRBY</strong></td><td>让一个 hash 类型 key 的字段值自增并指定步长</td><td><code>HINCRBY user:1 score 10</code></td></tr><tr><td><strong>HSETNX</strong></td><td>添加一个 hash 类型的 key 的 field 值，前提是这个 field 不存在，否则不执行</td><td><code>HSETNX user:1 email &quot;zhangsan@example.com&quot;</code></td></tr></tbody></table><h2 id="_6、list-类型命令" tabindex="-1"><a class="header-anchor" href="#_6、list-类型命令" aria-hidden="true">#</a> 6、List 类型命令</h2><table><thead><tr><th>命令</th><th>说明</th><th>语法示例</th></tr></thead><tbody><tr><td><strong>LPUSH</strong></td><td>向列表左侧插入一个或多个元素</td><td><code>LPUSH mylist &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></td></tr><tr><td><strong>LPOP</strong></td><td>移除并返回列表左侧的第一个元素，没有则返回 <code>nil</code></td><td><code>LPOP mylist</code></td></tr><tr><td><strong>RPUSH</strong></td><td>向列表右侧插入一个或多个元素</td><td><code>RPUSH mylist &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></td></tr><tr><td><strong>RPOP</strong></td><td>移除并返回列表右侧的第一个元素</td><td><code>RPOP mylist</code></td></tr><tr><td><strong>LRANGE</strong></td><td>返回一段索引范围内的所有元素（<code>0</code> 表示第一个元素，<code>-1</code> 表示最后一个元素）</td><td><code>LRANGE mylist 0 -1</code>（获取所有元素）<br><code>LRANGE mylist 0 2</code>（获取前 3 个元素）</td></tr><tr><td><strong>BLPOP</strong></td><td>与 <code>LPOP</code> 类似，列表为空时会阻塞等待指定时间（单位：秒），超时返回 <code>nil</code></td><td><code>BLPOP mylist 10</code>（等待 10 秒）</td></tr><tr><td><strong>BRPOP</strong></td><td>与 <code>RPOP</code> 类似，列表为空时会阻塞等待指定时间（单位：秒），超时返回 <code>nil</code></td><td><code>BRPOP mylist 10</code>（等待 10 秒）</td></tr></tbody></table><h2 id="_7、set-类型命令" tabindex="-1"><a class="header-anchor" href="#_7、set-类型命令" aria-hidden="true">#</a> 7、Set 类型命令</h2><table><thead><tr><th>命令</th><th>说明</th><th>语法示例</th></tr></thead><tbody><tr><td><strong>SADD</strong></td><td>向 set 中添加一个或多个元素</td><td><code>SADD myset &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></td></tr><tr><td><strong>SREM</strong></td><td>移除 set 中的指定元素</td><td><code>SREM myset &quot;b&quot;</code></td></tr><tr><td><strong>SCARD</strong></td><td>返回 set 中元素的个数</td><td><code>SCARD myset</code></td></tr><tr><td><strong>SISMEMBER</strong></td><td>判断一个元素是否存在于 set 中</td><td><code>SISMEMBER myset &quot;a&quot;</code></td></tr><tr><td><strong>SMEMBERS</strong></td><td>获取 set 中的所有元素</td><td><code>SMEMBERS myset</code></td></tr><tr><td><strong>SINTER</strong></td><td>求多个 set 的交集</td><td><code>SINTER myset1 myset2</code></td></tr><tr><td><strong>SDIFF</strong></td><td>求多个 set 的差集（存在于第一个 set 但不存在于其他 set 的元素）</td><td><code>SDIFF myset1 myset2</code></td></tr><tr><td><strong>SUNION</strong></td><td>求多个 set 的并集</td><td><code>SUNION myset1 myset2</code></td></tr></tbody></table><h2 id="_8、sortedset-zset-类型命令" tabindex="-1"><a class="header-anchor" href="#_8、sortedset-zset-类型命令" aria-hidden="true">#</a> 8、SortedSet (ZSet) 类型命令</h2><table><thead><tr><th>命令</th><th>说明</th><th>语法示例</th></tr></thead><tbody><tr><td><strong>ZADD</strong></td><td>添加一个或多个元素到 sorted set，若元素已存在则更新其 score 值</td><td><code>ZADD myzset 1 &quot;a&quot; 2 &quot;b&quot; 3 &quot;c&quot;</code></td></tr><tr><td><strong>ZREM</strong></td><td>删除 sorted set 中的一个指定元素</td><td><code>ZREM myzset &quot;b&quot;</code></td></tr><tr><td><strong>ZSCORE</strong></td><td>获取 sorted set 中指定元素的 score 值</td><td><code>ZSCORE myzset &quot;a&quot;</code></td></tr><tr><td><strong>ZRANK</strong></td><td>获取 sorted set 中指定元素的排名（按 score 升序，从 0 开始）</td><td><code>ZRANK myzset &quot;a&quot;</code></td></tr><tr><td><strong>ZCARD</strong></td><td>获取 sorted set 中的元素个数</td><td><code>ZCARD myzset</code></td></tr><tr><td><strong>ZCOUNT</strong></td><td>统计 score 值在给定范围内的所有元素的个数</td><td><code>ZCOUNT myzset 1 3</code></td></tr><tr><td><strong>ZINCRBY</strong></td><td>让 sorted set 中的指定元素自增，步长为指定的 increment 值</td><td><code>ZINCRBY myzset 2 &quot;a&quot;</code></td></tr><tr><td><strong>ZRANGE</strong></td><td>按照 score 升序排序后，获取指定排名范围内的元素</td><td><code>ZRANGE myzset 0 -1</code>（获取所有元素）<br><code>ZRANGE myzset 0 2</code>（获取前 3 个元素）</td></tr><tr><td><strong>ZRANGEBYSCORE</strong></td><td>按照 score 排序后，获取指定 score 范围内的元素</td><td><code>ZRANGEBYSCORE myzset 1 3</code></td></tr><tr><td><strong>ZDIFF、ZINTER、ZUNION</strong></td><td>求多个 sorted set 的差集、交集、并集</td><td><code>ZINTER myzset1 myzset2</code><br><code>ZUNION myzset1 myzset2</code></td></tr></tbody></table><h2 id="_9、springboot-使用-redis" tabindex="-1"><a class="header-anchor" href="#_9、springboot-使用-redis" aria-hidden="true">#</a> 9、SpringBoot 使用 Redis</h2><h3 id="安装使用" tabindex="-1"><a class="header-anchor" href="#安装使用" aria-hidden="true">#</a> 安装使用</h3><ol><li><p>添加依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--redis相关依赖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-pool2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.11.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--json序列化相关依赖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.14.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.module<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-module-jaxb-annotations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.14.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.14.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>配置连接</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">data</span><span class="token punctuation">:</span>
    <span class="token key atrule">redis</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
      <span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span> <span class="token comment"># 密码</span>
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">lettuce</span><span class="token punctuation">:</span>
        <span class="token key atrule">pool</span><span class="token punctuation">:</span>
          <span class="token comment"># 最大活跃连接数</span>
          <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">8</span>
          <span class="token comment"># 最大空闲连接数</span>
          <span class="token key atrule">max-idle</span><span class="token punctuation">:</span> <span class="token number">8</span>
          <span class="token comment"># 最小空闲连接数</span>
          <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">0</span>
          <span class="token comment"># 连接池最大阻塞等待时间（-1 表示无限制）</span>
          <span class="token key atrule">max-wait</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>1ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>设置 redis 的序列化</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableCaching</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>cache<span class="token punctuation">.</span></span><span class="token class-name">RedisCacheConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>cache<span class="token punctuation">.</span></span><span class="token class-name">RedisCacheManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>cache<span class="token punctuation">.</span></span><span class="token class-name">RedisCacheWriter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>connection<span class="token punctuation">.</span></span><span class="token class-name">RedisConnectionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisTemplate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">GenericJackson2JsonRedisSerializer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">Jackson2JsonRedisSerializer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">RedisSerializationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">StringRedisSerializer</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableCaching</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisConfig</span> <span class="token punctuation">{</span>

    <span class="token comment">// 配置 RedisTemplate，用于操作 Redis 数据库</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建 RedisTemplate 对象，用于执行 Redis 操作</span>
        <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> redisTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置连接工厂，用于与 Redis 建立连接</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 设置 key 的序列化器，使用 StringRedisSerializer 将 key 序列化为字符串</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置 value 的序列化器，使用 GenericJackson2JsonRedisSerializer 将对象序列化为 JSON</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GenericJackson2JsonRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 设置 hash key 的序列化器，使用 StringRedisSerializer 序列化 hash 的 key</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置 hash value 的序列化器，使用 Jackson2JsonRedisSerializer 将 hash 值序列化为 JSON</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setHashValueSerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 返回配置好的 RedisTemplate</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 配置 RedisCacheManager，用于管理 Redis 缓存</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RedisCacheManager</span> <span class="token function">redisCacheManager</span><span class="token punctuation">(</span><span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建 RedisCacheWriter，nonLockingRedisCacheWriter 表示不使用锁机制进行缓存操作</span>
        <span class="token class-name">RedisCacheWriter</span> redisCacheWriter <span class="token operator">=</span> <span class="token class-name">RedisCacheWriter</span><span class="token punctuation">.</span><span class="token function">nonLockingRedisCacheWriter</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">getConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 配置 RedisCacheConfiguration，指定缓存值的序列化方式，使用 RedisTemplate 中配置的 ValueSerializer 进行序列化</span>
        <span class="token class-name">RedisCacheConfiguration</span> redisCacheConfiguration <span class="token operator">=</span> <span class="token class-name">RedisCacheConfiguration</span><span class="token punctuation">.</span><span class="token function">defaultCacheConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">serializeValuesWith</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializationContext<span class="token punctuation">.</span>SerializationPair</span><span class="token punctuation">.</span><span class="token function">fromSerializer</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">getValueSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 返回配置好的 RedisCacheManager</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RedisCacheManager</span><span class="token punctuation">(</span>redisCacheWriter<span class="token punctuation">,</span> redisCacheConfiguration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>注入 bean</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> redisTemplate<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h3 id="方法介绍" tabindex="-1"><a class="header-anchor" href="#方法介绍" aria-hidden="true">#</a> 方法介绍</h3><table><thead><tr><th>API</th><th>返回值类型</th><th>说明</th></tr></thead><tbody><tr><td><strong><code>redisTemplate.opsForValue()</code></strong></td><td><code>ValueOperations</code></td><td>操作 String 类型数据</td></tr><tr><td><strong><code>redisTemplate.opsForHash()</code></strong></td><td><code>HashOperations</code></td><td>操作 Hash 类型数据</td></tr><tr><td><strong><code>redisTemplate.opsForList()</code></strong></td><td><code>ListOperations</code></td><td>操作 List 类型数据</td></tr><tr><td><strong><code>redisTemplate.opsForSet()</code></strong></td><td><code>SetOperations</code></td><td>操作 Set 类型数据</td></tr><tr><td><strong><code>redisTemplate.opsForZSet()</code></strong></td><td><code>ZSetOperations</code></td><td>操作 SortedSet 类型数据</td></tr><tr><td><strong><code>redisTemplate</code></strong></td><td>-</td><td>通用的命令（如 key 相关操作）</td></tr></tbody></table><ol><li>操作 String 类型</li></ol><ul><li><p><strong>API</strong>：<code>redisTemplate.opsForValue()</code></p></li><li><p><strong>返回值类型</strong>：<code>ValueOperations</code></p></li><li><p><strong>说明</strong>：用于操作 Redis 中的字符串（String）类型数据。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> redisTemplate<span class="token punctuation">;</span>

<span class="token comment">// 写入 String 数据</span>
<span class="token class-name">ValueOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> valueOps <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
valueOps<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
valueOps<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">HOURS</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置过期时间 1 小时</span>

<span class="token comment">// 读取 String 数据</span>
<span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> valueOps<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Integer</span> age <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> valueOps<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 递增/递减</span>
valueOps<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token string">&quot;visitCount&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// visitCount 自增 1</span>
valueOps<span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token string">&quot;visitCount&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// visitCount 自减 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><ol start="2"><li>操作 Hash 类型</li></ol><ul><li><p><strong>API</strong>：<code>redisTemplate.opsForHash()</code></p></li><li><p><strong>返回值类型</strong>：<code>HashOperations</code></p></li><li><p><strong>说明</strong>：用于操作 Redis 中的哈希（Hash）类型数据，适合存储对象的多个字段。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">HashOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> hashOps <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 写入 Hash 数据</span>
hashOps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;user:1001&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hashOps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;user:1001&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi@example.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hashOps<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span><span class="token string">&quot;user:1002&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 读取 Hash 数据</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> hashOps<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;user:1001&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> userMap <span class="token operator">=</span> hashOps<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token string">&quot;user:1002&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 删除 Hash 字段</span>
hashOps<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;user:1001&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><ol start="3"><li>操作 List 类型</li></ol><ul><li><p><strong>API</strong>：<code>redisTemplate.opsForList()</code></p></li><li><p><strong>返回值类型</strong>：<code>ListOperations</code></p></li><li><p><strong>说明</strong>：用于操作 Redis 中的列表（List）类型数据，基于链表实现，支持双向操作。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ListOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> listOps <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 写入 List 数据（左插/右插）</span>
listOps<span class="token punctuation">.</span><span class="token function">leftPush</span><span class="token punctuation">(</span><span class="token string">&quot;messageList&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
listOps<span class="token punctuation">.</span><span class="token function">rightPush</span><span class="token punctuation">(</span><span class="token string">&quot;messageList&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
listOps<span class="token punctuation">.</span><span class="token function">leftPushAll</span><span class="token punctuation">(</span><span class="token string">&quot;messageList&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;There&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 读取 List 数据</span>
<span class="token class-name">Object</span> first <span class="token operator">=</span> listOps<span class="token punctuation">.</span><span class="token function">leftPop</span><span class="token punctuation">(</span><span class="token string">&quot;messageList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 弹出左侧元素</span>
<span class="token class-name">Object</span> last <span class="token operator">=</span> listOps<span class="token punctuation">.</span><span class="token function">rightPop</span><span class="token punctuation">(</span><span class="token string">&quot;messageList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 弹出右侧元素</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> messages <span class="token operator">=</span> listOps<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token string">&quot;messageList&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取全部元素</span>

<span class="token comment">// 获取列表长度</span>
<span class="token class-name">Long</span> size <span class="token operator">=</span> listOps<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token string">&quot;messageList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><ol start="4"><li>操作 Set 类型</li></ol><ul><li><p><strong>API</strong>：<code>redisTemplate.opsForSet()</code></p></li><li><p><strong>返回值类型</strong>：<code>SetOperations</code></p></li><li><p><strong>说明</strong>：用于操作 Redis 中的集合（Set）类型数据，元素唯一且无序。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">SetOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> setOps <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 写入 Set 数据</span>
setOps<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;tags&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;spring&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;redis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
setOps<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;tags&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 读取 Set 数据</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> allTags <span class="token operator">=</span> setOps<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token string">&quot;tags&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Boolean</span> isMember <span class="token operator">=</span> setOps<span class="token punctuation">.</span><span class="token function">isMember</span><span class="token punctuation">(</span><span class="token string">&quot;tags&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 集合运算</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> union <span class="token operator">=</span> setOps<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span><span class="token string">&quot;tags&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;otherTags&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 并集</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> intersect <span class="token operator">=</span> setOps<span class="token punctuation">.</span><span class="token function">intersect</span><span class="token punctuation">(</span><span class="token string">&quot;tags&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;otherTags&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 交集</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><ol start="5"><li>操作 Sorted Set (ZSet) 类型</li></ol><ul><li><p><strong>API</strong>：<code>redisTemplate.opsForZSet()</code></p></li><li><p><strong>返回值类型</strong>：<code>ZSetOperations</code></p></li><li><p><strong>说明</strong>：用于操作 Redis 中的有序集合（ZSet）类型数据，元素唯一且按分数排序。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ZSetOperations</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> zSetOps <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForZSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 写入 ZSet 数据</span>
zSetOps<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;ranking&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token number">95.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
zSetOps<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;ranking&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token number">88.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
zSetOps<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;ranking&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">,</span> <span class="token number">92.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 读取 ZSet 数据</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> top2 <span class="token operator">=</span> zSetOps<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token string">&quot;ranking&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 按分数升序取前 2 名</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> top2Desc <span class="token operator">=</span> zSetOps<span class="token punctuation">.</span><span class="token function">reverseRange</span><span class="token punctuation">(</span><span class="token string">&quot;ranking&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 按分数降序取前 2 名</span>
<span class="token class-name">Double</span> score <span class="token operator">=</span> zSetOps<span class="token punctuation">.</span><span class="token function">score</span><span class="token punctuation">(</span><span class="token string">&quot;ranking&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取元素分数</span>

<span class="token comment">// 递增分数</span>
zSetOps<span class="token punctuation">.</span><span class="token function">incrementScore</span><span class="token punctuation">(</span><span class="token string">&quot;ranking&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><ol start="6"><li>RedisTemplate 通用命令</li></ol><ul><li><p><strong>API</strong>：<code>redisTemplate</code></p></li><li><p><strong>说明</strong>：提供 Redis 通用操作，如删除、过期、判断存在等。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 删除 key</span>
<span class="token class-name">Boolean</span> deleted <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置过期时间</span>
<span class="token class-name">Boolean</span> expire <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string">&quot;messageList&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 判断 key 是否存在</span>
<span class="token class-name">Boolean</span> exists <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span><span class="token string">&quot;tags&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 重命名 key</span>
redisTemplate<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&quot;oldKey&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;newKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取 key 的剩余过期时间</span>
<span class="token class-name">Long</span> ttl <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getExpire</span><span class="token punctuation">(</span><span class="token string">&quot;ranking&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul>`,41))])}const b=p(d,[["render",m],["__file","Redis.html.vue"]]);export{b as default};
